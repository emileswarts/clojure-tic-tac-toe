<!DOCTYPE html>
<html>
    <head>
      <title>ClojureScript Hello Browser</title>
      <script type="text/javascript" src="out/goog/base.js"></script>
      <script type="text/javascript" src="resources/public/core.js"></script>
      <script type="text/javascript">
        goog.require("tictactoe.core");
      </script>
      <script>
var whatever = function(position, mark) {
  document.getElementById('cell' + position).value = mark;
}

var handleCellClick = function(position) {
  board = tictactoe.core.game_board(board, position, 'X')
  renderBoard()
  if (tictactoe.core.game_progress(board) === 'not-over') {
    const cpuMove = tictactoe.core.cpu_move(board, 'O')
    board = tictactoe.core.game_board(board, cpuMove, 'O')
    renderBoard()
  }
  document.getElementById('status').innerHTML = tictactoe.core.game_progress(board)
}

var renderBoard = function() {
  tictactoe.core.render(board, whatever)
}

var board = tictactoe.core.game_board()

</script>
      <style>
        .cell {
           align-self: stretch;
        }
        .cell input {
          text-align: center;
        }
      </style>
    </head>
    <body>
      <div style="display: grid">
        <input class="cell" id="cell0" onClick="handleCellClick(0)" style="grid-column: 1 / 2; grid-row: 1 / 2" />
        <input class="cell" id="cell1" onClick="handleCellClick(1)" style="grid-column: 2 / 3; grid-row: 1 / 2" />
        <input class="cell" id="cell2" onClick="handleCellClick(2)" style="grid-column: 3 / 4; grid-row: 1 / 2" />
        <input class="cell" id="cell3" onClick="handleCellClick(3)" style="grid-column: 1 / 2; grid-row: 2 / 3" />
        <input class="cell" id="cell4" onClick="handleCellClick(4)" style="grid-column: 2 / 3; grid-row: 2 / 3" />
        <input class="cell" id="cell5" onClick="handleCellClick(5)" style="grid-column: 3 / 4; grid-row: 2 / 3" />
        <input class="cell" id="cell6" onClick="handleCellClick(6)" style="grid-column: 1 / 2; grid-row: 3 / 4" />
        <input class="cell" id="cell7" onClick="handleCellClick(7)" style="grid-column: 2 / 3; grid-row: 3 / 4" />
        <input class="cell" id="cell8" onClick="handleCellClick(8)" style="grid-column: 3 / 4; grid-row: 3 / 4" />

      </div>
      <div id="status">
      </div>
    </body>
</html>
